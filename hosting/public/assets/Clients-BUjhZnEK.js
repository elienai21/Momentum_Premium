import{c,r,j as e,G as p,m as k,n as C,q as S,o as D}from"./index-CnecHh6o.js";import{S as A}from"./SectionHeader-DUnCG6vt.js";import{S as o}from"./StatsCard-C_NEOUKV.js";import{B as h}from"./Badge-BfV7Ne6X.js";import{S as z}from"./search-qZKTdwq4.js";const _=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],L=c("ellipsis",_);const q=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],y=c("user-plus",q);const E=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],M=c("user-x",E);const B=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],g=c("users",B),P=()=>{const m="vivare-oficial",[s,j]=r.useState([]),[d,x]=r.useState(!0),[l,f]=r.useState("");r.useEffect(()=>{async function t(){x(!0);try{const a=k(C,"tenants",m,"clients"),n=S(a),w=(await D(n)).docs.map(u=>({id:u.id,...u.data()}));j(w)}catch(a){console.error("Error loading clients",a)}finally{x(!1)}}t()},[m]);const v=s.length;s.filter(t=>t.status==="active").length;const N=s.filter(t=>t.status==="inactive").length,b=s.filter(t=>{if(!t.createdAt)return!1;const a=t.createdAt.toDate?t.createdAt.toDate():new Date(t.createdAt),n=new Date;return n.setDate(n.getDate()-30),a>n}).length,i=s.filter(t=>t.name.toLowerCase().includes(l.toLowerCase())||t.email.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"space-y-8 pb-20 fade-in","aria-live":"polite",children:[e.jsx(A,{title:"Clientes",subtitle:"Gerencie sua base de clientes e acompanhe métricas de engajamento.",actions:e.jsxs("button",{className:"bg-momentum-accent hover:bg-momentum-accent/90 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all shadow-momentum-glow flex items-center gap-2",children:[e.jsx(y,{size:16})," ",e.jsx("span",{className:"hidden sm:inline",children:"Novo Cliente"})]})}),d?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsx(p,{className:"h-32 animate-pulse bg-current/5",children:e.jsx("div",{})},t))}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(o,{label:"Total de Clientes",value:String(v),icon:g,variant:"default"}),e.jsx(o,{label:"Novos (30 dias)",value:`+${b}`,icon:y,variant:"success"}),e.jsx(o,{label:"Inativos",value:String(N),icon:M,variant:"danger"})]}),e.jsxs(p,{className:"p-0 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-momentum-border flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"relative max-w-sm w-full",children:[e.jsx(z,{className:"absolute left-3 top-2.5 text-momentum-muted",size:16}),e.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:l,onChange:t=>f(t.target.value),className:"w-full bg-momentum-bg/50 border border-momentum-border rounded-lg pl-9 pr-4 py-2 text-sm focus:ring-2 focus:ring-momentum-accent outline-none transition-all text-momentum-text placeholder:text-momentum-muted/70"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(h,{variant:"neutral",children:[i.length," cadastrados"]})})]}),e.jsx("div",{className:"overflow-x-auto",children:d?e.jsxs("div",{className:"p-12 text-center flex flex-col items-center gap-2 text-momentum-muted animate-pulse",children:[e.jsx(g,{size:32,className:"opacity-20"}),e.jsx("p",{children:"Carregando lista de clientes..."})]}):e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-momentum-muted/5 text-momentum-muted font-semibold uppercase text-xs tracking-wider border-b border-momentum-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Nome"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Email"}),e.jsx("th",{className:"px-6 py-4",children:"Data Cadastro"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Ações"})]})}),e.jsxs("tbody",{className:"divide-y divide-momentum-border",children:[i.map(t=>e.jsxs("tr",{className:"hover:bg-momentum-accent/5 transition-colors group",children:[e.jsxs("td",{className:"px-6 py-4 font-medium text-momentum-text flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-momentum-accent/10 flex items-center justify-center text-momentum-accent font-bold text-xs shrink-0",children:(t.name||"?").charAt(0).toUpperCase()}),t.name||"Sem Nome"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(h,{variant:t.status==="active"?"success":"neutral",className:"capitalize",children:t.status==="active"?"Ativo":t.status})}),e.jsx("td",{className:"px-6 py-4 text-momentum-muted",children:t.email}),e.jsx("td",{className:"px-6 py-4 text-momentum-muted",children:t.createdAt?(t.createdAt.toDate?t.createdAt.toDate():new Date(t.createdAt)).toLocaleDateString("pt-BR"):"-"}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{className:"p-2 hover:bg-momentum-muted/10 rounded-lg text-momentum-muted transition-colors",children:e.jsx(L,{size:16})})})]},t.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-12 text-center text-momentum-muted",children:"Nenhum cliente encontrado."})})]})]})})]})]})};export{P as default};
