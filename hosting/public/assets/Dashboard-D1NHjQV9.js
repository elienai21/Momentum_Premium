const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-yBjCuyq5.js","assets/index-CaMRjOc-.css"])))=>i.map(i=>d[i]);
import{c as U,r as s,u as q,a as P,j as e,X as V,t as M,b as X,d as G,e as W,f as H,g as K,h as O,G as Q,_ as J}from"./index-yBjCuyq5.js";import{u as Y,c as Z}from"./usePulseSummary-33IffaZa.js";import{g as ee}from"./errorMessages-BDQo1fJX.js";import{A as te}from"./AdvisorDock-W9T3F8s7.js";import{U as se}from"./UpgradeRequiredModal-C-znzcLQ.js";import{C as ae}from"./CfoApi-y6tgnmHQ.js";import{S as I}from"./StatsCard-DbM3_MXf.js";import{A as F}from"./AsyncPanel-OzLCl5j3.js";import{W as re}from"./wallet-DZ9kZ3HQ.js";import{C as le}from"./circle-dollar-sign-CsUCiMyl.js";import{C as oe}from"./credit-card-q0oH5HAB.js";import"./AdvisorChat-BJEFtGTd.js";import"./SectionHeader-MSrAe8iw.js";import"./trash-2-B738TgPz.js";import"./send-BjKxuDE5.js";import"./user-B28uMnpN.js";import"./rotate-ccw-DU9Bc9uM.js";const ne=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],ie=U("hourglass",ne),_={incDeltaPct:0,expDeltaPct:0,oneOffIncome:0,oneOffExpense:0},de=({open:n,onClose:a,baseline:x,onConfirm:u})=>{const y=s.useRef(null);q(y,n);const{notify:f}=P(),[i,w]=s.useState(_),[p,S]=s.useState(!1),[d,h]=s.useState(null),[j,b]=s.useState(!1),[g,t]=s.useState(null);if(s.useEffect(()=>{n&&(w(_),h(null),b(!1),t(null))},[n]),!n)return null;const v=o=>m=>{const l=m.target.value;w(k=>({...k,[o]:l===""?void 0:Number(l)}))},R=async o=>{o.preventDefault(),S(!0);try{const m={incDeltaPct:i.incDeltaPct??0,expDeltaPct:i.expDeltaPct??0,oneOffIncome:i.oneOffIncome??0,oneOffExpense:i.oneOffExpense??0};M("cfo_simulate_submit",m);const l=await ae.simulate(m);h(l),u?.(m),f({type:"success",message:"SimulaÃ§Ã£o realizada com sucesso."})}catch(m){console.error("Erro na simulaÃ§Ã£o do CFO:",m);const l=m?.response?.status,k=m?.response?.data;l===403&&k?.code==="UPGRADE_REQUIRED"?(t({feature:k.feature,plan:k.plan}),b(!0),f({type:"warning",message:"Essa simulaÃ§Ã£o faz parte de um recurso avanÃ§ado do CFO. Fale com o suporte para ativar o plano ideal para sua empresa."})):f({type:"error",message:"NÃ£o foi possÃ­vel executar a simulaÃ§Ã£o agora. Tente novamente em alguns instantes."})}finally{S(!1)}},N=x.revenueMonth??0,D=x.expenseMonth??0,c=x.runwayMonths??0;return e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/60 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"simulate-title",children:e.jsxs("div",{ref:y,className:"w-full max-w-lg rounded-2xl border border-slate-800 bg-slate-950/95 p-5 shadow-xl shadow-black/60",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{id:"simulate-title",className:"text-sm font-semibold text-slate-50",children:"Simular cenÃ¡rio financeiro"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Ajuste receita, despesas e eventos pontuais para ver o impacto imediato no seu fluxo de caixa."})]}),e.jsx("button",{type:"button",onClick:a,className:"inline-flex h-7 w-7 items-center justify-center rounded-full border border-slate-700 text-slate-400 hover:text-slate-100 hover:bg-slate-900","aria-label":"Fechar simulaÃ§Ã£o",children:e.jsx(V,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 gap-3 rounded-xl border border-slate-800 bg-slate-900/60 p-3 text-[11px] text-slate-300",children:[e.jsxs("div",{children:[e.jsx("p",{className:"uppercase tracking-wide text-slate-500 text-[10px]",children:"Receita mensal"}),e.jsxs("p",{className:"font-semibold text-slate-50",children:["R"," ",N.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"uppercase tracking-wide text-slate-500 text-[10px]",children:"Despesa mensal"}),e.jsxs("p",{className:"font-semibold text-slate-50",children:["R"," ",D.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"uppercase tracking-wide text-slate-500 text-[10px]",children:"Runway estimado"}),e.jsx("p",{className:"font-semibold text-slate-50",children:c?`${c.toFixed(1)} meses`:"â€”"})]})]}),e.jsxs("form",{onSubmit:R,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300 mb-1",children:"Aumento de receita (%)"}),e.jsx("input",{type:"number",step:"1",min:-100,max:200,value:i.incDeltaPct??"",onChange:v("incDeltaPct"),className:"w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2 py-1.5 text-xs text-slate-100 outline-none focus:ring-1 focus:ring-sky-500",placeholder:"ex: 10"}),e.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"Ex.: 10 = crescer 10% na receita."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300 mb-1",children:"VariaÃ§Ã£o de despesas (%)"}),e.jsx("input",{type:"number",step:"1",min:-100,max:200,value:i.expDeltaPct??"",onChange:v("expDeltaPct"),className:"w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2 py-1.5 text-xs text-slate-100 outline-none focus:ring-1 focus:ring-sky-500",placeholder:"ex: -5"}),e.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"Ex.: -5 = reduzir gastos em 5%."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300 mb-1",children:"Receita pontual (R$)"}),e.jsx("input",{type:"number",step:"100",min:0,value:i.oneOffIncome??"",onChange:v("oneOffIncome"),className:"w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2 py-1.5 text-xs text-slate-100 outline-none focus:ring-1 focus:ring-sky-500",placeholder:"ex: 10000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300 mb-1",children:"Despesa pontual (R$)"}),e.jsx("input",{type:"number",step:"100",min:0,value:i.oneOffExpense??"",onChange:v("oneOffExpense"),className:"w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2 py-1.5 text-xs text-slate-100 outline-none focus:ring-1 focus:ring-sky-500",placeholder:"ex: 5000"})]})]}),d&&e.jsxs("div",{className:"mt-3 rounded-xl border border-slate-800 bg-slate-900/70 p-3 text-[11px] text-slate-200 space-y-1.5",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:"Resultado da simulaÃ§Ã£o"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px]",children:"Nova receita"}),e.jsxs("p",{className:"font-semibold text-slate-50",children:["R"," ",d.result.newIncome.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px]",children:"Nova despesa"}),e.jsxs("p",{className:"font-semibold text-slate-50",children:["R"," ",d.result.newExpense.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px]",children:"Fluxo lÃ­quido"}),e.jsxs("p",{className:`font-semibold ${d.result.net>=0?"text-emerald-400":"text-red-400"}`,children:["R"," ",d.result.net.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-xl border border-slate-700 bg-slate-900/80 px-3 py-1.5 text-xs text-slate-200 hover:bg-slate-800",disabled:p,children:"Fechar"}),e.jsx("button",{type:"submit",disabled:p,className:"rounded-xl bg-sky-500 px-4 py-1.5 text-xs font-semibold text-white shadow hover:bg-sky-400 disabled:opacity-60 disabled:cursor-not-allowed",children:p?"Simulando...":"Simular cenÃ¡rio"})]})]}),e.jsx(se,{open:j,onClose:()=>b(!1),feature:g?.feature,plan:g?.plan})]})})};function ce({open:n,onClose:a,onImported:x}){const[u,y]=s.useState(""),[f,i]=s.useState(!1),[w,p]=s.useState(null),[S,d]=s.useState(null),[h,j]=s.useState("sheets"),[b,g]=s.useState(null),t="momentum-premium@appspot.gserviceaccount.com";if(!n)return null;function v(c){return c.match(/\/d\/([^/]+)/)?.[1]??c.trim()}async function R(){if(h==="file"){if(!b){d("Selecione um arquivo para importar.");return}return N(b)}const c=u.trim();if(!c){d("Cole a URL da planilha para importar.");return}i(!0),p(null),d(null);try{const o=v(c),{data:m}=await X.post("/sync/import",{sheetId:o}),l=m.importedCount??0,k=m.message??`ImportaÃ§Ã£o concluÃ­da com sucesso. Foram importados ${l} registros.`;p(k),M?.("import_success",{importedCount:l}),x&&x({importedCount:l})}catch(o){console.error("[ImportModal] Erro ao importar:",o);const m=o?.status===403?"PermissÃ£o negada. Compartilhe a planilha com o e-mail do robÃ´ antes de importar.":o?.message||"NÃ£o foi possÃ­vel importar a planilha. Verifique a URL e tente novamente.";d(m),M?.("import_error",{status:o?.status})}finally{i(!1)}}async function N(c){i(!0),p(null),d(null);try{const o=Math.max(1,Math.round(c.size/1024));p(`Arquivo "${c.name}" pronto para processamento (${o} KB).`),M?.("import_file_ready",{name:c.name,size:c.size}),x&&x()}catch(o){console.error("[ImportModal] Falha ao processar arquivo:",o),d("NÃ£o foi possÃ­vel ler o arquivo. Tente novamente ou envie um CSV/OFX vÃ¡lido.")}finally{i(!1)}}function D(){y(""),p(null),d(null),g(null),j("sheets"),i(!1),a()}return e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"glass max-w-md w-full rounded-2xl p-4 shadow-xl border border-white/10",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base md:text-lg font-semibold",children:"Importar dados financeiros"}),e.jsx("p",{className:"text-xs md:text-sm text-slate-500 mt-1",children:"Envie sua planilha do Google Sheets ou um arquivo (CSV/XLSX/OFX). O Momentum importarÃ¡ as transaÃ§Ãµes para o seu tenant atual."})]}),e.jsx("button",{type:"button",onClick:D,className:"text-slate-400 hover:text-slate-200 text-sm px-2","aria-label":"Fechar",children:"âœ•"})]}),e.jsxs("div",{className:"flex gap-2 mb-3 text-xs font-semibold",children:[e.jsx("button",{type:"button",onClick:()=>j("sheets"),className:`px-3 py-1.5 rounded-lg border ${h==="sheets"?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-slate-50 border-slate-200 text-slate-500"}`,children:"Google Sheets"}),e.jsx("button",{type:"button",onClick:()=>j("file"),className:`px-3 py-1.5 rounded-lg border ${h==="file"?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-slate-50 border-slate-200 text-slate-500"}`,children:"Upload de Arquivo"})]}),h==="sheets"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] text-amber-800",children:["âš ï¸ Importante: compartilhe a planilha com o robÃ´"," ",e.jsx("strong",{children:t})," como ",e.jsx("em",{children:"Editor"})," antes de importar."]}),e.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"URL da planilha"}),e.jsx("input",{type:"url",value:u,onChange:c=>y(c.target.value),placeholder:"https://docs.google.com/spreadsheets/d/...",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm mb-3 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 focus:border-emerald-500/60 bg-white/60"}),e.jsx("p",{className:"text-[11px] text-slate-400 mb-3",children:"Dica: verifique se a planilha estÃ¡ compartilhada com permissÃ£o de leitura para o serviÃ§o conectado, ou se o token do Google foi configurado corretamente."})]}),h==="file"&&e.jsxs("div",{className:"space-y-3 mb-2",children:[e.jsx("p",{className:"text-[11px] text-slate-500",children:"Envie um arquivo CSV, XLSX ou OFX com suas transaÃ§Ãµes. O processamento serÃ¡ iniciado assim que vocÃª confirmar."}),e.jsx("input",{type:"file",accept:".csv,.xlsx,.ofx",onChange:c=>{const o=c.target.files?.[0];g(o??null),p(null),d(null)},className:"w-full text-xs"}),b&&e.jsxs("div",{className:"text-[11px] text-emerald-700 bg-emerald-50 border border-emerald-100 rounded-lg px-3 py-2",children:["Arquivo selecionado: ",e.jsx("strong",{children:b.name})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mb-2",children:[e.jsx("button",{type:"button",onClick:D,className:"text-xs md:text-sm px-3 py-1.5 rounded-lg border border-slate-200 bg-white hover:bg-slate-50",disabled:f,children:"Cancelar"}),e.jsx("button",{type:"button",onClick:R,className:"text-xs md:text-sm px-3 py-1.5 rounded-lg bg-emerald-600 text-white hover:bg-emerald-500 disabled:opacity-60 disabled:cursor-not-allowed",disabled:f||(h==="sheets"?!u.trim():!b),children:f?"Importando...":"Importar"})]}),S&&e.jsx("div",{className:"mt-2 text-xs text-red-500 bg-red-50 border border-red-100 rounded-lg px-3 py-2",children:S}),w&&e.jsx("div",{className:"mt-2 text-xs text-emerald-700 bg-emerald-50 border border-emerald-100 rounded-lg px-3 py-2",children:w})]})})}const xe=({title:n,description:a,icon:x,actionLabel:u,onActionClick:y,primaryActionLabel:f,onPrimaryAction:i,secondaryActionLabel:w,onSecondaryAction:p,className:S="",descriptionId:d})=>{const h=s.useRef(null),j=f??u,b=i??y,g=!!(j&&b),t=!!(w&&p);s.useEffect(()=>{if(g){const N=setTimeout(()=>h.current?.focus(),0);return()=>clearTimeout(N)}},[g]);const v=(...N)=>N.filter(Boolean).join(" "),R=d||"empty-desc";return e.jsxs("section",{className:v("relative z-0","flex flex-col items-center justify-center text-center","rounded-2xl border border-slate-200 bg-white/90 p-8 shadow-sm","dark:bg-[rgba(14,18,28,0.65)] dark:border-white/10",S),role:"region","aria-live":"polite","aria-describedby":a?R:void 0,children:[x&&e.jsx("div",{className:v("mb-3 flex h-12 w-12 items-center justify-center rounded-2xl","bg-slate-50 text-2xl shadow-inner","dark:bg-white/5"),"aria-hidden":"true",children:x}),e.jsx("h2",{className:"text-base font-semibold tracking-tight text-slate-900 dark:text-slate-100",children:n}),a&&e.jsx("p",{id:R,className:"mt-1 max-w-[60ch] text-sm text-slate-500 dark:text-slate-300",children:a}),(g||t)&&e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2",children:[g&&e.jsx("button",{ref:h,type:"button",onClick:b,className:"inline-flex items-center rounded-xl bg-slate-900 px-3 py-2 text-xs font-medium text-white shadow-sm transition hover:bg-black/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-slate-500 dark:bg-emerald-600 dark:hover:bg-emerald-500",children:j}),t&&e.jsx("button",{type:"button",onClick:p,className:"inline-flex items-center rounded-xl border border-slate-300 bg-white px-3 py-2 text-xs font-medium text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-200 dark:hover:bg-slate-800",children:w})]})]})};function Me(){const n=G(),{user:a,loading:x}=W(),{tenantId:u}=H();if(x)return e.jsx("div",{className:"p-8 text-sm text-momentum-muted",children:"Carregando seu ambiente financeiro..."});if(!a)return e.jsx("div",{className:"p-8 text-sm text-momentum-muted",children:"Sua sessÃ£o expirou. FaÃ§a login novamente para ver seus dados."});const[y,f]=s.useState(!1),[i,w]=s.useState(!1),[p,S]=s.useState(!1),d=a.displayName||(a.email?a.email.split("@")[0]:"VocÃª"),h="Sua empresa",j=new Date,b=s.useMemo(()=>{const r=new Date(j);return r.setDate(r.getDate()-7),r},[j]),g=r=>r.toISOString().slice(0,10),{data:t,loading:v,error:R}=Y({tenantId:u,periodStart:g(b),periodEnd:g(j)}),N=R,{error:D}=K(),{notify:c}=P(),o=t?{cashBalance:t.kpis.cashBalance,revenueMonth:t.kpis.revenueMonth,expenseMonth:t.kpis.expenseMonth,runwayMonths:t.kpis.runwayMonths}:null;s.useEffect(()=>{},[D]);const m=()=>{typeof window<"u"&&window.dispatchEvent(new Event("open-support-dock"))};N&&ee(N);const l=t?.kpis||{cashBalance:0,revenueMonth:0,expenseMonth:0,runwayMonths:0},[k,T]=s.useState([]),[$,L]=s.useState(!1);s.useEffect(()=>{async function r(){if(a){L(!0);try{const E={from:null,to:null,category:null,type:null,card:null,q:null},{data:z}=await J(()=>import("./index-yBjCuyq5.js").then(A=>A.W),__vite__mapDeps([0,1])).then(A=>A.api.post("/portal/transactions/filter",E));T(z?.transactions?.slice(0,5)||[])}catch(E){console.warn("Falha ao carregar transaÃ§Ãµes recentes:",E)}finally{L(!1)}}}r()},[a]);const C=t?.health||Z(l||{revenueMonth:0,expenseMonth:0,runwayMonths:0});return e.jsxs("div",{className:"pt-24 space-y-8 pb-24 fade-in","aria-live":"polite",children:[!u&&e.jsx(xe,{title:"Ambiente nÃ£o configurado",description:"Crie uma empresa para comeÃ§ar a visualizar seu painel financeiro.",actionLabel:"Criar Empresa",onActionClick:()=>n("/onboarding"),icon:"ðŸ¢"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 font-display",children:["OlÃ¡, ",e.jsx("span",{className:"text-primary",children:d})]}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-display text-sm",children:["Empresa: ",e.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:h})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(B,{label:"Acesso Local"}),t?.periodEnd&&e.jsx(B,{label:`Atualizado: ${new Date(t.periodEnd).toLocaleDateString("pt-BR")}`,color:"blue",dot:!0})]})]}),N&&e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 flex items-center gap-3 text-amber-500 animate-in fade-in slide-in-from-top-2 duration-500 shadow-glow",children:[e.jsx("span",{className:"material-icons-round",children:"warning"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold font-display",children:"SincronizaÃ§Ã£o Incompleta"}),e.jsx("p",{className:"opacity-80",children:"NÃ£o foi possÃ­vel carregar todos os dados. Verifique sua conexÃ£o ou se hÃ¡ importaÃ§Ãµes pendentes."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.jsxs(F,{isLoading:v,error:null,loadingVariant:"skeleton",children:[e.jsx(I,{label:"Saldo em Caixa",value:l?.cashBalance?l.cashBalance.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00",icon:re,variant:"default",className:"shadow-sm border-slate-200/50 dark:border-white/5"}),e.jsx(I,{label:"Receita",value:l?.revenueMonth?l.revenueMonth.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00",icon:le,variant:"success",className:"shadow-sm border-slate-200/50 dark:border-white/5"}),e.jsx(I,{label:"Despesas",value:l?.expenseMonth?l.expenseMonth.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00",icon:oe,variant:"danger",className:"shadow-sm border-slate-200/50 dark:border-white/5"}),e.jsx(I,{label:"Runway",value:l?.runwayMonths?`${Math.round(l.runwayMonths)} meses`:"0 meses",icon:ie,variant:"warn",className:"shadow-sm border-slate-200/50 dark:border-white/5"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 glass rounded-xl p-8 relative overflow-hidden border border-primary/20 group h-full",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none transition-opacity group-hover:opacity-100 opacity-60"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 md:gap-12 h-full",children:[e.jsxs("div",{className:"relative w-40 h-40 flex-shrink-0",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[e.jsx("circle",{className:"text-slate-200 dark:text-slate-800",cx:"50",cy:"50",fill:"none",r:"45",stroke:"currentColor",strokeWidth:"8"}),e.jsx("circle",{className:"gauge-anim drop-shadow-[0_0_10px_rgba(110,52,255,0.4)] transition-all duration-1000",cx:"50",cy:"50",fill:"none",r:"45",stroke:"url(#dashboard-gauge-gradient)",strokeDasharray:"283",strokeDashoffset:t?283-283*(C.status==="green"?.85:C.status==="yellow"?.65:.45):283,strokeLinecap:"round",strokeWidth:"8"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"dashboard-gauge-gradient",x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#6e34ff"}),e.jsx("stop",{offset:"100%",stopColor:"#00c6ff"})]})})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?C.status==="green"?"85":C.status==="yellow"?"65":"45":"--"}),e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-widest leading-none mt-1",children:"SaÃºde AI"})]})]}),e.jsxs("div",{className:"flex-1 space-y-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded bg-primary/20 text-primary shadow-glow",children:e.jsx("span",{className:"material-icons-round text-sm",children:"auto_awesome"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 font-display",children:"AnÃ¡lise de SaÃºde Financeira"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-sm",children:t?e.jsxs(e.Fragment,{children:["Sua saÃºde financeira estÃ¡ ",e.jsx("strong",{className:O(C.status==="green"?"text-success":C.status==="yellow"?"text-warning":"text-error"),children:C.status==="green"?"excelente":C.status==="yellow"?"em atenÃ§Ã£o":"crÃ­tica"}),". ",C.reasons?.[0]||"O fluxo de caixa permanece positivo pelo 4Âº mÃªs consecutivo."]}):"Aguardando sincronizaÃ§Ã£o de dados para gerar anÃ¡lise de saÃºde via IA. Importe seu extrato bancÃ¡rio ou planilha para comeÃ§ar."}),e.jsxs("div",{className:"pt-2 flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>n(t?"/cfo/deep-dive":"/imports"),className:"bg-primary hover:bg-primary/90 text-white px-5 py-2.5 rounded-lg text-sm font-bold transition-all shadow-glow flex items-center gap-2 group/btn",children:[t?"Ver Detalhes":"Importar Agora",e.jsx("span",{className:"material-icons-round text-sm group-hover/btn:translate-x-1 transition-transform",children:"arrow_forward"})]}),e.jsx("button",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 px-5 py-2.5 rounded-lg text-sm font-bold hover:bg-slate-50 transition-colors shadow-sm",children:"Exportar RelatÃ³rio"})]})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6 border-l-4 border-l-cyan-500/80 flex flex-col h-full shadow-sm border-slate-200/50 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-gradient-to-br from-slate-800 to-black border border-slate-700 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"material-icons-round text-cyan-400 text-sm",children:"smart_toy"})}),e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200 font-display",children:"SugestÃµes do CFO"})]}),e.jsx("span",{className:"text-[9px] bg-cyan-500/10 text-cyan-600 dark:text-cyan-400 px-2.5 py-1 rounded-lg border border-cyan-500/20 font-bold uppercase tracking-wider font-display text-slate-800 dark:text-slate-200",children:"IA Ativa"})]}),e.jsx(F,{isLoading:v,error:null,isEmpty:!t?.alerts?.length,emptyTitle:"Dados Insuficientes",emptyDescription:"Importe mais transaÃ§Ãµes para gerar sugestÃµes.",children:e.jsx("div",{className:"space-y-4 flex-1",children:t?.alerts?.slice(0,3).map(r=>e.jsx(me,{title:r.type.toUpperCase(),badge:r.type==="anomalia"?"Risco":"Aviso",type:r.type==="anomalia"?"danger":"warning",desc:r.message,actions:["Analisar","Ignorar"]},r.id))})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 font-display uppercase tracking-widest text-[10px] opacity-70",children:"Ãšltimas TransaÃ§Ãµes Inteligentes"}),e.jsxs("button",{onClick:()=>n("/transactions"),className:"text-[10px] text-primary font-bold uppercase flex items-center gap-1 hover:underline tracking-widest font-display",children:["Fluxo Completo ",e.jsx("span",{className:"material-icons-round text-sm",children:"arrow_forward"})]})]}),e.jsx(F,{isLoading:$,error:null,isEmpty:k.length===0,emptyTitle:"Sem TransaÃ§Ãµes",emptyDescription:"A sincronizaÃ§Ã£o com seu banco ainda nÃ£o retornou movimentos financeiros.",children:e.jsx(Q,{className:"p-0 overflow-hidden border border-slate-200/50 dark:border-white/5 shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-white/5 text-slate-400 font-bold uppercase tracking-widest text-[9px] border-b border-slate-200 dark:border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Data"}),e.jsx("th",{className:"px-6 py-4",children:"DescriÃ§Ã£o"}),e.jsx("th",{className:"px-6 py-4",children:"Categoria"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Valor"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/5",children:k.map((r,E)=>e.jsxs("tr",{className:"hover:bg-primary/5 transition-colors cursor-pointer group",onClick:()=>n("/transactions"),children:[e.jsx("td",{className:"px-6 py-4 text-slate-500 dark:text-slate-400 font-medium",children:r.date}),e.jsx("td",{className:"px-6 py-4 font-bold text-slate-900 dark:text-slate-100 truncate max-w-[200px]",children:r.description}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 font-bold uppercase text-[9px] tracking-tighter",children:r.category})}),e.jsxs("td",{className:O("px-6 py-4 text-right font-black tracking-tight",r.type==="credit"?"text-emerald-500":"text-slate-900 dark:text-white"),children:[r.type==="debit"?"-":"",Math.abs(r.amount||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]},E))})]})})})})]}),e.jsx("section",{className:"border-t border-slate-200/50 dark:border-white/5 pt-8 mt-4",children:e.jsxs("div",{className:"glass relative overflow-hidden rounded-xl border border-primary/20 p-8 shadow-sm group",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-64 h-64 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full blur-3xl opacity-50 transition-opacity group-hover:opacity-70"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"hidden sm:flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-secondary text-white shadow-glow",children:e.jsx("span",{className:"material-symbols-outlined text-2xl font-bold",children:"finance_mode"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 font-display mb-1 flex items-center gap-2",children:["Deep Dive Financeiro",e.jsx("span",{className:"sm:hidden material-symbols-outlined text-primary",children:"finance_mode"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-2xl text-sm leading-relaxed font-display",children:"Acesse a nova tela dedicada para anÃ¡lises profundas. Visualize o fluxo de caixa, monitore transaÃ§Ãµes inteligentes e receba alertas de IA em tempo real."})]})]}),e.jsxs("button",{onClick:()=>n("/cfo/deep-dive"),className:"w-full md:w-auto shrink-0 bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg text-sm font-bold transition-all shadow-glow hover:shadow-lg flex items-center justify-center gap-2 group/btn font-display",children:[e.jsx("span",{children:"Acessar AnÃ¡lise Completa"}),e.jsx("span",{className:"material-icons-round text-sm group-hover/btn:translate-x-1 transition-transform",children:"arrow_forward"})]})]})]})}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-slate-200 dark:border-slate-800",children:[e.jsx("button",{onClick:m,className:"px-5 py-2.5 rounded-full border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 text-[11px] font-bold uppercase tracking-widest hover:bg-slate-50 dark:hover:bg-slate-800 transition shadow-sm",children:"Abrir Suporte"}),e.jsx("button",{className:"px-5 py-2.5 rounded-full border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 text-[11px] font-bold uppercase tracking-widest hover:bg-slate-50 dark:hover:bg-slate-800 transition shadow-sm",children:"Falar com Advisor"})]}),e.jsx(te,{open:y,onClose:()=>f(!1)}),e.jsx(de,{open:i,onClose:()=>w(!1),baseline:o||{},onConfirm:r=>M()}),e.jsx(ce,{open:p,onClose:()=>S(!1)})]})}const me=({title:n,badge:a,desc:x,type:u,actions:y})=>{const f={success:"text-success bg-success/10",warning:"text-warning bg-warning/10",danger:"text-error bg-error/10"};return e.jsxs("div",{className:"bg-white dark:bg-slate-800/40 p-4 rounded-xl border border-slate-100 dark:border-white/5 hover:border-primary/40 transition-colors shadow-sm group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 font-display",children:n}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded-lg border border-current/10 font-display ${f[u]}`,children:a})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:x}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 bg-slate-200/50 dark:bg-slate-700/50 text-slate-700 dark:text-slate-300 text-[10px] py-1.5 rounded font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition uppercase tracking-widest leading-none font-display",children:y[0]}),e.jsx("button",{className:"flex-1 bg-primary/10 text-primary hover:bg-primary hover:text-white text-[10px] py-1.5 rounded font-bold transition border border-primary/20 uppercase tracking-widest leading-none font-display",children:y[1]})]})]})},B=({label:n,color:a="slate",dot:x=!1})=>{const u={slate:"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400",success:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800 text-emerald-600 dark:text-emerald-400",blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-100 dark:border-blue-800 text-blue-600 dark:text-blue-400"};return e.jsxs("div",{className:`px-3 py-1 rounded-full border text-[11px] font-bold flex items-center gap-2 shadow-sm ${u[a]}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${a==="slate"?"bg-slate-400":a==="success"?"bg-emerald-500":"bg-blue-500"} ${x?"animate-pulse":""}`}),n]})};export{Me as default};
