import{c as v,H as k,r,j as e,G as C,J as h,K as A,P as g,Q as L,I as z,h as M}from"./index-DpomL--_.js";import{S as T}from"./SectionHeader-CxDw8ob-.js";import{S as B}from"./search-BLhJIDcn.js";import{F as D}from"./funnel-DNZFaKuN.js";import{C as f}from"./clock-CIoAVrF6.js";import{T as I}from"./triangle-alert-CPztsQwG.js";const E=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],F=v("arrow-up-down",E);const R=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],_=v("check-check",R);function K(){const{data:l=[],isLoading:j,error:b,markAsRead:c}=k(),[a,d]=r.useState(""),[n,u]=r.useState("all"),[o,x]=r.useState("all"),[m,N]=r.useState("date"),p=r.useMemo(()=>l.filter(t=>{const s=t.title.toLowerCase().includes(a.toLowerCase())||t.message.toLowerCase().includes(a.toLowerCase()),i=n==="all"||t.severity===n,S=o==="all"||t.status===o;return s&&i&&S}).sort((t,s)=>{if(m==="date")return new Date(s.createdAt).getTime()-new Date(t.createdAt).getTime();{const i={high:3,medium:2,low:1};return i[s.severity]-i[t.severity]}}),[l,a,n,o,m]),y=async()=>{const t=l.filter(s=>s.status==="unread").map(s=>s.id);for(const s of t)await c(s)},w=t=>{switch(t){case"high":return"danger";case"medium":return"warn";default:return"info"}};return e.jsxs("div",{className:"space-y-8 pb-20 fade-in","aria-live":"polite",children:[e.jsx(T,{title:"Centro de Alertas",subtitle:"Monitore anomalias, vencimentos e mudanças importantes na sua saúde financeira.",actions:e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-momentum-bg/50 border border-momentum-border rounded-lg text-xs font-medium text-momentum-text hover:bg-momentum-bg transition-all flex items-center gap-2",children:[e.jsx(_,{size:14})," Marcar todos como lidos"]})})}),e.jsxs(C,{className:"p-4 flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(B,{className:"absolute left-3 top-2.5 text-momentum-muted",size:16}),e.jsx("input",{type:"text",placeholder:"Buscar alertas...",value:a,onChange:t=>d(t.target.value),className:"w-full bg-momentum-bg/50 border border-momentum-border rounded-lg pl-10 pr-4 py-2 text-sm focus:ring-2 focus:ring-momentum-accent outline-none transition-all text-momentum-text placeholder:text-momentum-muted/70"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-momentum-bg/30 p-1 rounded-lg border border-momentum-border",children:[e.jsx(D,{size:14,className:"ml-2 text-momentum-muted"}),e.jsxs("select",{value:n,onChange:t=>u(t.target.value),className:"bg-transparent text-xs text-momentum-text outline-none pr-2",children:[e.jsx("option",{value:"all",children:"Severidade: Todas"}),e.jsx("option",{value:"high",children:"Alta"}),e.jsx("option",{value:"medium",children:"Média"}),e.jsx("option",{value:"low",children:"Baixa"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-momentum-bg/30 p-1 rounded-lg border border-momentum-border",children:[e.jsx(f,{size:14,className:"ml-2 text-momentum-muted"}),e.jsxs("select",{value:o,onChange:t=>x(t.target.value),className:"bg-transparent text-xs text-momentum-text outline-none pr-2",children:[e.jsx("option",{value:"all",children:"Status: Todos"}),e.jsx("option",{value:"unread",children:"Não lidos"}),e.jsx("option",{value:"read",children:"Lidos"})]})]}),e.jsxs("button",{onClick:()=>N(t=>t==="date"?"severity":"date"),className:"p-2 bg-momentum-bg/50 border border-momentum-border rounded-lg text-momentum-muted hover:text-momentum-accent transition-all flex items-center gap-2",title:"Alternar ordenação",children:[e.jsx(F,{size:14}),e.jsx("span",{className:"text-xs font-medium uppercase font-display",children:m==="date"?"Data":"Nível"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:j?e.jsx(h,{children:[1,2,3,4].map(t=>e.jsx(A,{className:"h-24"},t))}):b?e.jsx(g,{icon:e.jsx(I,{size:48,className:"text-momentum-danger"}),title:"Erro ao carregar alertas",description:"Não conseguimos sincronizar com o servidor de notificações.",action:e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-momentum-accent text-white rounded-lg font-medium",children:"Tentar novamente"})}):p.length===0?e.jsx(g,{icon:e.jsx(L,{size:48,className:"text-momentum-muted"}),title:"Sem alertas no momento",description:a||n!=="all"||o!=="all"?"Nenhum alerta corresponde aos seus filtros atuais.":"Você está em dia! Nenhuma anomalia financeira detectada.",action:a||n!=="all"||o!=="all"?e.jsx("button",{onClick:()=>{d(""),u("all"),x("all")},className:"text-momentum-accent hover:underline text-sm font-medium",children:"Limpar filtros"}):void 0}):e.jsx(h,{children:p.map(t=>e.jsx(z,{title:t.title,description:t.message,severity:w(t.severity),className:M(t.status==="read"&&"opacity-60 saturate-50 hover:opacity-100 hover:saturate-100"),actions:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("span",{className:"text-[10px] text-momentum-muted flex items-center gap-1",children:[e.jsx(f,{size:10}),new Date(t.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),t.status==="unread"&&e.jsx("button",{onClick:()=>c(t.id),className:"text-[10px] font-bold text-momentum-accent hover:underline uppercase tracking-tighter",children:"Marcar como lido"})]})},t.id))})})]})}export{K as default};
