import{c as N,h as w,r as n,b as k,p as C,n as A,s as z,v as S,j as e,E,G as h}from"./index-CnecHh6o.js";import{u as L,C as R}from"./useCredits-BL4Ms3qi.js";import{R as u}from"./refresh-cw-CAK1KFWO.js";import{B as P}from"./building-2-Cs7Oi7i7.js";import{S as g}from"./sparkles-Ca8rIDs9.js";import{H as T}from"./history-DgHCgjJn.js";const D=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],I=N("shield",D);const M=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],$=N("zap",M);function B(t=10){const r=w()?.token??null,[l,a]=n.useState([]),[d,c]=n.useState(!1),[x,p]=n.useState(null),o=n.useCallback(async()=>{if(r){c(!0),p(null);try{const i=await k.get(`/billing/usage-logs?limit=${t}`);a(i.data.logs||[])}catch(i){p(i instanceof Error?i:new Error("Erro ao carregar logs"))}finally{c(!1)}}},[r,t]);return n.useEffect(()=>{o()},[o]),{logs:l,isLoading:d,error:x,refetch:o}}function F(t){const[s,r]=n.useState(null);return n.useEffect(()=>{async function l(){try{const a=C(A,"tenants",t),d=await z(a);d.exists()&&r(d.data())}catch(a){console.error("Erro ao carregar tenant:",a)}}l()},[t]),s}function y(t){return new Intl.NumberFormat("pt-BR").format(t)}function f(t){if(!t)return"N/A";const s=new Date(t);return Number.isNaN(s.getTime())?"N/A":s.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}const q=()=>{const{credits:t,isLoading:s,refetch:r}=L(),{logs:l,isLoading:a}=B(10),{tenantId:d}=S(),c=F(d),x=t?.monthlyQuota||0,p=t?.available||0,o=x>0?Math.min(100,Math.max(0,p/x*100)):0,i=(t?.planNormalized||c?.plan||"Starter").toUpperCase(),b=f(t?.renewsAt),v=t?.periodSource==="stripe"?"Ciclo de Faturamento":"Ciclo de 30 dias";return e.jsxs("div",{className:"pt-24 space-y-8 pb-24 fade-in","aria-live":"polite",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 font-display",children:"Preferências da Conta"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-display text-sm",children:"Gerencie seu plano, faturamento e créditos de IA do Momentum."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(j,{label:i,color:"success"}),t?.periodSource==="stripe"&&e.jsx(j,{label:"Stripe Ativo",color:"blue",dot:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 glass rounded-xl p-8 relative overflow-hidden border border-primary/20 group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none transition-opacity group-hover:opacity-100 opacity-60"}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/20 text-primary shadow-glow",children:e.jsx(I,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest font-display",children:"Seu Plano Atual"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 font-display",children:i}),e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-success/20 text-success text-[10px] font-bold uppercase font-display",children:"Ativo"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-slate-800/40 border border-slate-200/50 dark:border-white/5 shadow-sm space-y-1",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider font-display",children:"Próxima renovação"}),e.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200 font-display",children:b})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-slate-800/40 border border-slate-200/50 dark:border-white/5 shadow-sm space-y-1",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider font-display",children:"Método de faturamento"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200",children:[e.jsx(R,{size:14,className:"text-slate-400"}),e.jsx("p",{className:"font-semibold text-sm font-display",children:"Cartão final **** 4242"})]})]})]}),e.jsxs("div",{className:"pt-4 flex flex-wrap gap-3",children:[e.jsxs("button",{className:"bg-primary hover:bg-primary/90 text-white px-5 py-2.5 rounded-lg text-sm font-bold transition-all shadow-glow flex items-center gap-2 group/btn font-display",children:["Alterar Plano",e.jsx(u,{size:16,className:"group-hover/btn:rotate-180 transition-transform duration-500"})]}),e.jsxs("button",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 px-5 py-2.5 rounded-lg text-sm font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors shadow-sm flex items-center gap-2 font-display",children:["Gerenciar Faturamento",e.jsx(E,{size:16})]})]})]})]}),e.jsxs(h,{className:"p-6 border border-slate-200/50 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(P,{size:18,className:"text-primary"}),e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200 tracking-tight font-display",children:"Dados da Organização"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[9px] uppercase font-bold text-slate-400 tracking-widest font-display",children:"Nome do Tenant"}),e.jsx("p",{className:"text-slate-700 dark:text-slate-200 font-bold text-sm font-display",children:c?.name||"Minha Empresa"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[9px] uppercase font-bold text-slate-400 tracking-widest font-display",children:"Workspace ID"}),e.jsx("code",{className:"text-[11px] bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded text-slate-500 dark:text-slate-400 font-mono block truncate",children:d||"---"})]}),e.jsx("div",{className:"pt-4 border-t border-slate-100 dark:border-slate-800",children:e.jsx("button",{className:"text-xs text-primary hover:text-primary/80 font-bold uppercase tracking-wider font-display",children:"Editar Perfil Empresa"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded bg-primary/20 text-primary shadow-glow",children:e.jsx(g,{size:14})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 font-display",children:"Créditos de IA & Automação"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(h,{className:"lg:col-span-2 p-6 flex flex-col md:flex-row gap-8 border border-slate-200/50 dark:border-white/5 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-bold tracking-tight font-display",children:"Uso no Período Atual"}),e.jsxs("p",{className:"text-[11px] text-slate-400 italic font-display",children:["Baseado no ",v]})]}),e.jsx("button",{onClick:()=>r(),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 hover:text-primary transition-colors",title:"Recarregar",children:e.jsx(u,{size:16,className:s?"animate-spin":""})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("span",{className:"text-4xl font-black text-slate-800 dark:text-slate-200 tracking-tighter font-display",children:[y(p),e.jsx("span",{className:"text-lg font-normal text-slate-400 ml-1",children:"restantes"})]}),e.jsxs("span",{className:"text-xs font-bold text-slate-500 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-md font-display",children:["Cota: ",y(x)]})]}),e.jsx("div",{className:"h-4 w-full bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden p-1 shadow-inner",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out shadow-sm ${o>40?"bg-gradient-to-r from-primary to-secondary":o>15?"bg-warning":"bg-error"}`,style:{width:`${o}%`}})}),e.jsxs("div",{className:"flex justify-between text-[10px] font-bold uppercase text-slate-400 tracking-widest pt-1 px-1 font-display",children:[e.jsxs("span",{children:["Início: ",f(t?.lastResetAt)]}),e.jsxs("span",{children:["Renova em: ",b]})]})]})]}),e.jsxs("div",{className:"w-full md:w-56 p-5 rounded-xl bg-cyan-500/10 border border-cyan-500/20 flex flex-col justify-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-cyan-600 dark:text-cyan-400 font-bold text-sm font-display",children:[e.jsx($,{size:16,className:"fill-cyan-500/30"}),e.jsx("span",{children:"Dica Momentum"})]}),e.jsx("p",{className:"text-[11px] text-cyan-700 dark:text-cyan-300 leading-relaxed font-medium font-display",children:"Relatórios avançados consomem 20 créditos. O Health Score diário utiliza apenas 5."}),e.jsx("button",{className:"text-[11px] font-bold text-cyan-600 dark:text-cyan-400 mt-2 hover:bg-cyan-500/10 px-2 py-1 rounded transition-colors w-fit border border-cyan-500/30 font-display uppercase tracking-wider",children:"Ver Tabela de Custos"})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6 relative overflow-hidden border border-primary/30 group flex flex-col justify-between",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/40 to-secondary/40 rounded-full blur-2xl -mr-8 -mt-8 pointer-events-none opacity-60 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative z-10 space-y-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center shadow-glow",children:e.jsx(g,{size:20,className:"text-white"})}),e.jsx("h3",{className:"font-bold text-xl leading-tight tracking-tight text-slate-800 dark:text-slate-200 font-display",children:"Precisa de mais Inteligência?"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-[13px] leading-relaxed font-display",children:"Adicione pacotes extras de 1.000 créditos ou migre para o Plano Business."})]}),e.jsx("button",{className:"relative z-10 mt-6 w-full py-3 rounded-xl bg-primary hover:bg-primary/90 text-white font-bold transition-all shadow-glow active:scale-95 text-sm uppercase tracking-wider font-display",children:"Ver Opções de Upgrade"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 font-display uppercase tracking-widest text-[10px] opacity-70 flex items-center gap-2",children:[e.jsx(T,{size:14})," Histórico de Uso"]})}),e.jsx(h,{className:"p-0 overflow-hidden border border-slate-200/50 dark:border-white/5 shadow-sm",children:a?e.jsx("div",{className:"p-6 text-center text-slate-400 font-display",children:"Carregando..."}):l.length===0?e.jsx("div",{className:"p-6 text-center text-slate-400 italic font-display",children:"Nenhum registro de uso encontrado."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-white/5 text-slate-400 font-bold uppercase tracking-widest text-[9px] border-b border-slate-200 dark:border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 font-display",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 font-display",children:"Fonte"}),e.jsx("th",{className:"px-6 py-4 text-right font-display",children:"Créditos"}),e.jsx("th",{className:"px-6 py-4 text-right font-display",children:"Data"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/5",children:l.map(m=>e.jsxs("tr",{className:"hover:bg-primary/5 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-bold text-slate-900 dark:text-slate-100 font-display",children:m.type}),e.jsx("td",{className:"px-6 py-4 text-slate-500 dark:text-slate-400 font-display",children:m.source}),e.jsxs("td",{className:"px-6 py-4 text-right font-black text-error tracking-tight font-display",children:["-",m.creditsConsumed]}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-400 text-xs font-display",children:f(m.createdAt)})]},m.id))})]})})})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-slate-200 dark:border-slate-800",children:[e.jsx("button",{className:"px-5 py-2.5 rounded-full border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 text-[11px] font-bold uppercase tracking-widest hover:bg-slate-50 dark:hover:bg-slate-800 transition shadow-sm font-display",children:"Abrir Suporte"}),e.jsx("button",{className:"px-5 py-2.5 rounded-full border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 text-[11px] font-bold uppercase tracking-widest hover:bg-slate-50 dark:hover:bg-slate-800 transition shadow-sm font-display",children:"Falar com Advisor"})]})]})},j=({label:t,color:s="slate",dot:r=!1})=>{const l={slate:"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400",success:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800 text-emerald-600 dark:text-emerald-400",blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-100 dark:border-blue-800 text-blue-600 dark:text-blue-400"},a={slate:"bg-slate-400",success:"bg-emerald-500",blue:"bg-blue-500"};return e.jsxs("div",{className:`px-3 py-1 rounded-full border text-[11px] font-bold flex items-center gap-2 shadow-sm font-display ${l[s]}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${a[s]} ${r?"animate-pulse":""}`}),t]})};export{q as default};
