const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ca3pTw0A.js","assets/index-BzZ12PM9.css"])))=>i.map(i=>d[i]);
import{c as T,u as H,r as a,a as z,b as P,j as e,X as $,d as U,t as D,e as W,f as K,g as O,G as J,_ as Q}from"./index-Ca3pTw0A.js";import{u as X,c as Y}from"./usePulseSummary-DFzFwspT.js";import{A as Z}from"./AdvisorChat-BpedRuyk.js";import{U as ee}from"./UpgradeRequiredModal-D-QPlWmx.js";import{C as se}from"./CfoApi-olDKmOTd.js";import{S as C}from"./StatsCard-DsSRO-77.js";import{A as M}from"./AsyncPanel-DuHowZv1.js";import{W as te}from"./wallet-DoynlKbF.js";import{C as ae}from"./circle-dollar-sign-DiXplYZ_.js";import"./SectionHeader-C3MNUNVL.js";import"./Badge-DAlfXC1K.js";import"./trash-2-4DRvt3WK.js";import"./user-TcgTcc6O.js";const re=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],le=T("credit-card",re);const ne=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],oe=T("hourglass",ne);function ie(){const t=H()?.token??null,[o,d]=a.useState(null),[m,n]=a.useState(!1),[i,b]=a.useState(null),p=a.useCallback(async()=>{if(t){n(!0),b(null);try{const c=await z.get("/billing/credits");d(c.data)}catch(c){b(c instanceof Error?c:new Error("Erro ao carregar créditos"))}finally{n(!1)}}},[t]);a.useEffect(()=>{p()},[p]);const g=o?o.available<=0:!1;return{credits:o,isLoading:m,error:i,noCredits:g,refetch:p}}function de(s){if(!s)return;const t=s?.response?.status??s?.status;if(typeof t=="number")return t}function ce(s){switch(de(s)){case 401:return{title:"Sua sessão expirou",message:"Entre novamente para continuar vendo seus dados financeiros.",ctaLabel:"Fazer login",ctaHref:"/login"};case 403:return{title:"Recurso não disponível no seu plano",message:"Este recurso faz parte de um plano superior do Momentum. Veja os planos disponíveis.",ctaLabel:"Ver planos",ctaHref:"/planos"};case 404:return{title:"Nenhum dado encontrado",message:"Não encontramos dados para este período. Tente outro filtro ou importe seus dados financeiros."};case 500:return{title:"Erro inesperado",message:"Ocorreu um erro interno. Já registramos isso. Tente novamente em alguns instantes."};default:return{title:"Algo não saiu como esperado",message:"Tivemos um problema para carregar essas informações. Tente novamente. Se persistir, fale com o suporte."}}}function xe({open:s,onClose:t,title:o="Advisor"}){const d=a.useRef(null),m=a.useRef(null);return P(d,s),a.useEffect(()=>{function n(i){i.key==="Escape"&&s&&t()}return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[s,t]),a.useEffect(()=>{const n=document.body.style.overflow;return s&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=n}},[s]),a.useEffect(()=>{s&&m.current?.focus()},[s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 z-[60] bg-black/20 backdrop-blur-sm transition-opacity ${s?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":!s,onClick:t}),e.jsxs("div",{ref:d,role:"dialog","aria-modal":"true","aria-labelledby":"advisor-dock-title",className:`fixed inset-y-0 right-0 z-[70] w-full max-w-lg bg-white border-l shadow-2xl transition-transform duration-300 ${s?"translate-x-0":"translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[e.jsx("h2",{id:"advisor-dock-title",className:"text-sm font-medium text-slate-700",children:o}),e.jsx("button",{ref:m,onClick:t,"aria-label":"Fechar chat do Advisor",className:"rounded-lg p-2 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-300",children:e.jsx($,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"h-[calc(100%-56px)]",children:e.jsx(Z,{})})]})]})}const _={incDeltaPct:0,expDeltaPct:0,oneOffIncome:0,oneOffExpense:0},me=({open:s,onClose:t,baseline:o,onConfirm:d})=>{const m=a.useRef(null);P(m,s);const{notify:n}=U(),[i,b]=a.useState(_),[p,g]=a.useState(!1),[c,S]=a.useState(null),[w,j]=a.useState(!1),[u,r]=a.useState(null);if(a.useEffect(()=>{s&&(b(_),S(null),j(!1),r(null))},[s]),!s)return null;const h=R=>f=>{const x=f.target.value;b(v=>({...v,[R]:x===""?void 0:Number(x)}))},N=async R=>{R.preventDefault(),g(!0);try{const f={incDeltaPct:i.incDeltaPct??0,expDeltaPct:i.expDeltaPct??0,oneOffIncome:i.oneOffIncome??0,oneOffExpense:i.oneOffExpense??0};D("cfo_simulate_submit",f);const x=await se.simulate(f);S(x),d?.(f),n({type:"success",message:"Simulação realizada com sucesso."})}catch(f){console.error("Erro na simulação do CFO:",f);const x=f?.response?.status,v=f?.response?.data;x===403&&v?.code==="UPGRADE_REQUIRED"?(r({feature:v.feature,plan:v.plan}),j(!0),n({type:"warning",message:"Essa simulação faz parte de um recurso avançado do CFO. Fale com o suporte para ativar o plano ideal para sua empresa."})):n({type:"error",message:"Não foi possível executar a simulação agora. Tente novamente em alguns instantes."})}finally{g(!1)}},k=o.revenueMonth??0,I=o.expenseMonth??0,A=o.runwayMonths??0;return e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/60 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"simulate-title",children:e.jsxs("div",{ref:m,className:"w-full max-w-lg rounded-2xl border border-slate-800 bg-slate-950/95 p-5 shadow-xl shadow-black/60",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{id:"simulate-title",className:"text-sm font-semibold text-slate-50",children:"Simular cenário financeiro"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Ajuste receita, despesas e eventos pontuais para ver o impacto imediato no seu fluxo de caixa."})]}),e.jsx("button",{type:"button",onClick:t,className:"inline-flex h-7 w-7 items-center justify-center rounded-full border border-slate-700 text-slate-400 hover:text-slate-100 hover:bg-slate-900","aria-label":"Fechar simulação",children:e.jsx($,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-3 gap-3 rounded-xl border border-slate-800 bg-slate-900/60 p-3 text-[11px] text-slate-300",children:[e.jsxs("div",{children:[e.jsx("p",{className:"uppercase tracking-wide text-slate-500 text-[10px]",children:"Receita mensal"}),e.jsxs("p",{className:"font-semibold text-slate-50",children:["R"," ",k.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"uppercase tracking-wide text-slate-500 text-[10px]",children:"Despesa mensal"}),e.jsxs("p",{className:"font-semibold text-slate-50",children:["R"," ",I.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"uppercase tracking-wide text-slate-500 text-[10px]",children:"Runway estimado"}),e.jsx("p",{className:"font-semibold text-slate-50",children:A?`${A.toFixed(1)} meses`:"—"})]})]}),e.jsxs("form",{onSubmit:N,className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300 mb-1",children:"Aumento de receita (%)"}),e.jsx("input",{type:"number",step:"1",min:-100,max:200,value:i.incDeltaPct??"",onChange:h("incDeltaPct"),className:"w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2 py-1.5 text-xs text-slate-100 outline-none focus:ring-1 focus:ring-sky-500",placeholder:"ex: 10"}),e.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"Ex.: 10 = crescer 10% na receita."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300 mb-1",children:"Variação de despesas (%)"}),e.jsx("input",{type:"number",step:"1",min:-100,max:200,value:i.expDeltaPct??"",onChange:h("expDeltaPct"),className:"w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2 py-1.5 text-xs text-slate-100 outline-none focus:ring-1 focus:ring-sky-500",placeholder:"ex: -5"}),e.jsx("p",{className:"mt-1 text-[10px] text-slate-500",children:"Ex.: -5 = reduzir gastos em 5%."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300 mb-1",children:"Receita pontual (R$)"}),e.jsx("input",{type:"number",step:"100",min:0,value:i.oneOffIncome??"",onChange:h("oneOffIncome"),className:"w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2 py-1.5 text-xs text-slate-100 outline-none focus:ring-1 focus:ring-sky-500",placeholder:"ex: 10000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] font-medium text-slate-300 mb-1",children:"Despesa pontual (R$)"}),e.jsx("input",{type:"number",step:"100",min:0,value:i.oneOffExpense??"",onChange:h("oneOffExpense"),className:"w-full rounded-lg border border-slate-700 bg-slate-900/80 px-2 py-1.5 text-xs text-slate-100 outline-none focus:ring-1 focus:ring-sky-500",placeholder:"ex: 5000"})]})]}),c&&e.jsxs("div",{className:"mt-3 rounded-xl border border-slate-800 bg-slate-900/70 p-3 text-[11px] text-slate-200 space-y-1.5",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:"Resultado da simulação"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px]",children:"Nova receita"}),e.jsxs("p",{className:"font-semibold text-slate-50",children:["R"," ",c.result.newIncome.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px]",children:"Nova despesa"}),e.jsxs("p",{className:"font-semibold text-slate-50",children:["R"," ",c.result.newExpense.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px]",children:"Fluxo líquido"}),e.jsxs("p",{className:`font-semibold ${c.result.net>=0?"text-emerald-400":"text-red-400"}`,children:["R"," ",c.result.net.toLocaleString("pt-BR",{maximumFractionDigits:0})]})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"rounded-xl border border-slate-700 bg-slate-900/80 px-3 py-1.5 text-xs text-slate-200 hover:bg-slate-800",disabled:p,children:"Fechar"}),e.jsx("button",{type:"submit",disabled:p,className:"rounded-xl bg-sky-500 px-4 py-1.5 text-xs font-semibold text-white shadow hover:bg-sky-400 disabled:opacity-60 disabled:cursor-not-allowed",children:p?"Simulando...":"Simular cenário"})]})]}),e.jsx(ee,{open:w,onClose:()=>j(!1),feature:u?.feature,plan:u?.plan})]})})};function pe({open:s,onClose:t,onImported:o}){const[d,m]=a.useState(""),[n,i]=a.useState(!1),[b,p]=a.useState(null),[g,c]=a.useState(null);if(!s)return null;function S(u){return u.match(/\/d\/([^/]+)/)?.[1]??u.trim()}async function w(){const u=d.trim();if(u){i(!0),p(null),c(null);try{const r=S(u),{data:h}=await z.post("/sync/import",{sheetId:r}),N=h.importedCount??0,k=h.message??`Importação concluída com sucesso. Foram importados ${N} registros.`;p(k),D?.("import_success",{importedCount:N}),o&&o({importedCount:N})}catch(r){console.error("[ImportModal] Erro ao importar:",r);const h=r?.message||"Não foi possível importar a planilha. Verifique a URL e tente novamente.";c(h),D?.("import_error",{status:r?.status})}finally{i(!1)}}}function j(){m(""),p(null),c(null),i(!1),t()}return e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:e.jsxs("div",{className:"glass max-w-md w-full rounded-2xl p-4 shadow-xl border border-white/10",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base md:text-lg font-semibold",children:"Importar dados do Google Sheets"}),e.jsx("p",{className:"text-xs md:text-sm text-slate-500 mt-1",children:"Cole a URL da planilha com seus dados financeiros. O Momentum vai importar as transações para o seu tenant atual."})]}),e.jsx("button",{type:"button",onClick:j,className:"text-slate-400 hover:text-slate-200 text-sm px-2","aria-label":"Fechar",children:"✕"})]}),e.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"URL da planilha"}),e.jsx("input",{type:"url",value:d,onChange:u=>m(u.target.value),placeholder:"https://docs.google.com/spreadsheets/d/...",className:"w-full rounded-lg border border-slate-200 px-3 py-2 text-sm mb-3 focus:outline-none focus:ring-2 focus:ring-emerald-500/60 focus:border-emerald-500/60 bg-white/60"}),e.jsx("p",{className:"text-[11px] text-slate-400 mb-3",children:"Dica: verifique se a planilha está compartilhada com permissão de leitura para o serviço conectado, ou se o token do Google foi configurado corretamente."}),e.jsxs("div",{className:"flex justify-end gap-2 mb-2",children:[e.jsx("button",{type:"button",onClick:j,className:"text-xs md:text-sm px-3 py-1.5 rounded-lg border border-slate-200 bg-white hover:bg-slate-50",disabled:n,children:"Cancelar"}),e.jsx("button",{type:"button",onClick:w,className:"text-xs md:text-sm px-3 py-1.5 rounded-lg bg-emerald-600 text-white hover:bg-emerald-500 disabled:opacity-60 disabled:cursor-not-allowed",disabled:n||!d.trim(),children:n?"Importando...":"Importar"})]}),g&&e.jsx("div",{className:"mt-2 text-xs text-red-500 bg-red-50 border border-red-100 rounded-lg px-3 py-2",children:g}),b&&e.jsx("div",{className:"mt-2 text-xs text-emerald-700 bg-emerald-50 border border-emerald-100 rounded-lg px-3 py-2",children:b})]})})}function Ce(){const s=W(),{user:t,loading:o}=K();if(o)return e.jsx("div",{className:"p-8 text-sm text-momentum-muted",children:"Carregando seu ambiente financeiro..."});if(!t)return e.jsx("div",{className:"p-8 text-sm text-momentum-muted",children:"Sua sessão expirou. Faça login novamente para ver seus dados."});const[d,m]=a.useState(!1),[n,i]=a.useState(!1),[b,p]=a.useState(!1),g="vivare-oficial".trim?.()||"demo-tenant-001",c=t.displayName||(t.email?t.email.split("@")[0]:"Você"),S="Sua empresa",w=new Date,j=a.useMemo(()=>{const l=new Date(w);return l.setDate(l.getDate()-7),l},[w]),u=l=>l.toISOString().slice(0,10),{data:r,loading:h,error:N}=X({tenantId:g,periodStart:u(j),periodEnd:u(w)}),k=N,{error:I}=ie(),{notify:A}=U(),R=r?{cashBalance:r.kpis.cashBalance,revenueMonth:r.kpis.revenueMonth,expenseMonth:r.kpis.expenseMonth,runwayMonths:r.kpis.runwayMonths}:null;a.useEffect(()=>{},[I]);const f=()=>{typeof window<"u"&&window.dispatchEvent(new Event("open-support-dock"))};k&&ce(k);const x=r?.kpis,[v,V]=a.useState([]),[q,F]=a.useState(!1);a.useEffect(()=>{async function l(){if(t){F(!0);try{const E={from:null,to:null,category:null,type:null,card:null,q:null},{data:G}=await Q(()=>import("./index-Ca3pTw0A.js").then(L=>L.D),__vite__mapDeps([0,1])).then(L=>L.api.post("/portal/transactions/filter",E));V(G?.transactions?.slice(0,5)||[])}catch(E){console.warn("Falha ao carregar transações recentes:",E)}finally{F(!1)}}}l()},[t]);const y=r?.health||Y(x||{revenueMonth:0,expenseMonth:0,runwayMonths:0});return e.jsxs("div",{className:"pt-24 space-y-8 pb-24 fade-in","aria-live":"polite",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 font-display",children:["Olá, ",e.jsx("span",{className:"text-primary",children:c})]}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-display text-sm",children:["Empresa: ",e.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:S})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(B,{label:"Acesso Local"}),r?.periodEnd&&e.jsx(B,{label:`Atualizado: ${new Date(r.periodEnd).toLocaleDateString("pt-BR")}`,color:"blue",dot:!0})]})]}),k&&e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-xl p-4 flex items-center gap-3 text-amber-500 animate-in fade-in slide-in-from-top-2 duration-500 shadow-glow",children:[e.jsx("span",{className:"material-icons-round",children:"warning"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold font-display",children:"Sincronização Incompleta"}),e.jsx("p",{className:"opacity-80",children:"Não foi possível carregar todos os dados. Verifique sua conexão ou se há importações pendentes."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.jsxs(M,{isLoading:h,error:null,loadingVariant:"skeleton",children:[e.jsx(C,{label:"Saldo em Caixa",value:x?.cashBalance?x.cashBalance.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00",icon:te,variant:"default",className:"shadow-sm border-slate-200/50 dark:border-white/5"}),e.jsx(C,{label:"Receita",value:x?.revenueMonth?x.revenueMonth.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00",icon:ae,variant:"success",className:"shadow-sm border-slate-200/50 dark:border-white/5"}),e.jsx(C,{label:"Despesas",value:x?.expenseMonth?x.expenseMonth.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00",icon:le,variant:"danger",className:"shadow-sm border-slate-200/50 dark:border-white/5"}),e.jsx(C,{label:"Runway",value:x?.runwayMonths?`${Math.round(x.runwayMonths)} meses`:"0 meses",icon:oe,variant:"warn",className:"shadow-sm border-slate-200/50 dark:border-white/5"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 glass rounded-xl p-8 relative overflow-hidden border border-primary/20 group h-full",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none transition-opacity group-hover:opacity-100 opacity-60"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 md:gap-12 h-full",children:[e.jsxs("div",{className:"relative w-40 h-40 flex-shrink-0",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[e.jsx("circle",{className:"text-slate-200 dark:text-slate-800",cx:"50",cy:"50",fill:"none",r:"45",stroke:"currentColor",strokeWidth:"8"}),e.jsx("circle",{className:"gauge-anim drop-shadow-[0_0_10px_rgba(110,52,255,0.4)] transition-all duration-1000",cx:"50",cy:"50",fill:"none",r:"45",stroke:"url(#dashboard-gauge-gradient)",strokeDasharray:"283",strokeDashoffset:r?283-283*(y.status==="green"?.85:y.status==="yellow"?.65:.45):283,strokeLinecap:"round",strokeWidth:"8"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"dashboard-gauge-gradient",x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#6e34ff"}),e.jsx("stop",{offset:"100%",stopColor:"#00c6ff"})]})})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200",children:r?y.status==="green"?"85":y.status==="yellow"?"65":"45":"--"}),e.jsx("span",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-widest leading-none mt-1",children:"Saúde AI"})]})]}),e.jsxs("div",{className:"flex-1 space-y-4 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center rounded bg-primary/20 text-primary shadow-glow",children:e.jsx("span",{className:"material-icons-round text-sm",children:"auto_awesome"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100 font-display",children:"Análise de Saúde Financeira"})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-sm",children:r?e.jsxs(e.Fragment,{children:["Sua saúde financeira está ",e.jsx("strong",{className:O(y.status==="green"?"text-success":y.status==="yellow"?"text-warning":"text-error"),children:y.status==="green"?"excelente":y.status==="yellow"?"em atenção":"crítica"}),". ",y.reasons?.[0]||"O fluxo de caixa permanece positivo pelo 4º mês consecutivo."]}):"Aguardando sincronização de dados para gerar análise de saúde via IA. Importe seu extrato bancário ou planilha para começar."}),e.jsxs("div",{className:"pt-2 flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>s(r?"/cfo/deep-dive":"/imports"),className:"bg-primary hover:bg-primary/90 text-white px-5 py-2.5 rounded-lg text-sm font-bold transition-all shadow-glow flex items-center gap-2 group/btn",children:[r?"Ver Detalhes":"Importar Agora",e.jsx("span",{className:"material-icons-round text-sm group-hover/btn:translate-x-1 transition-transform",children:"arrow_forward"})]}),e.jsx("button",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 px-5 py-2.5 rounded-lg text-sm font-bold hover:bg-slate-50 transition-colors shadow-sm",children:"Exportar Relatório"})]})]})]})]}),e.jsxs("div",{className:"glass rounded-xl p-6 border-l-4 border-l-cyan-500/80 flex flex-col h-full shadow-sm border-slate-200/50 dark:border-white/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-gradient-to-br from-slate-800 to-black border border-slate-700 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"material-icons-round text-cyan-400 text-sm",children:"smart_toy"})}),e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200 font-display",children:"Sugestões do CFO"})]}),e.jsx("span",{className:"text-[9px] bg-cyan-500/10 text-cyan-600 dark:text-cyan-400 px-2.5 py-1 rounded-lg border border-cyan-500/20 font-bold uppercase tracking-wider font-display text-slate-800 dark:text-slate-200",children:"IA Ativa"})]}),e.jsx(M,{isLoading:h,error:null,isEmpty:!r?.alerts?.length,emptyTitle:"Dados Insuficientes",emptyDescription:"Importe mais transações para gerar sugestões.",children:e.jsx("div",{className:"space-y-4 flex-1",children:r?.alerts?.slice(0,3).map(l=>e.jsx(ue,{title:l.type.toUpperCase(),badge:l.type==="anomalia"?"Risco":"Aviso",type:l.type==="anomalia"?"danger":"warning",desc:l.message,actions:["Analisar","Ignorar"]},l.id))})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 font-display uppercase tracking-widest text-[10px] opacity-70",children:"Últimas Transações Inteligentes"}),e.jsxs("button",{onClick:()=>s("/transactions"),className:"text-[10px] text-primary font-bold uppercase flex items-center gap-1 hover:underline tracking-widest font-display",children:["Fluxo Completo ",e.jsx("span",{className:"material-icons-round text-sm",children:"arrow_forward"})]})]}),e.jsx(M,{isLoading:q,error:null,isEmpty:v.length===0,emptyTitle:"Sem Transações",emptyDescription:"A sincronização com seu banco ainda não retornou movimentos financeiros.",children:e.jsx(J,{className:"p-0 overflow-hidden border border-slate-200/50 dark:border-white/5 shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-white/5 text-slate-400 font-bold uppercase tracking-widest text-[9px] border-b border-slate-200 dark:border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Data"}),e.jsx("th",{className:"px-6 py-4",children:"Descrição"}),e.jsx("th",{className:"px-6 py-4",children:"Categoria"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Valor"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/5",children:v.map((l,E)=>e.jsxs("tr",{className:"hover:bg-primary/5 transition-colors cursor-pointer group",onClick:()=>s("/transactions"),children:[e.jsx("td",{className:"px-6 py-4 text-slate-500 dark:text-slate-400 font-medium",children:l.date}),e.jsx("td",{className:"px-6 py-4 font-bold text-slate-900 dark:text-slate-100 truncate max-w-[200px]",children:l.description}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 font-bold uppercase text-[9px] tracking-tighter",children:l.category})}),e.jsxs("td",{className:O("px-6 py-4 text-right font-black tracking-tight",l.type==="credit"?"text-emerald-500":"text-slate-900 dark:text-white"),children:[l.type==="debit"?"-":"",Math.abs(l.amount||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]},E))})]})})})})]}),e.jsx("section",{className:"border-t border-slate-200/50 dark:border-white/5 pt-8 mt-4",children:e.jsxs("div",{className:"glass relative overflow-hidden rounded-xl border border-primary/20 p-8 shadow-sm group",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-64 h-64 bg-gradient-to-br from-primary/20 to-secondary/20 rounded-full blur-3xl opacity-50 transition-opacity group-hover:opacity-70"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"hidden sm:flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-primary to-secondary text-white shadow-glow",children:e.jsx("span",{className:"material-symbols-outlined text-2xl font-bold",children:"finance_mode"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 font-display mb-1 flex items-center gap-2",children:["Deep Dive Financeiro",e.jsx("span",{className:"sm:hidden material-symbols-outlined text-primary",children:"finance_mode"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-2xl text-sm leading-relaxed font-display",children:"Acesse a nova tela dedicada para análises profundas. Visualize o fluxo de caixa, monitore transações inteligentes e receba alertas de IA em tempo real."})]})]}),e.jsxs("button",{onClick:()=>s("/cfo/deep-dive"),className:"w-full md:w-auto shrink-0 bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg text-sm font-bold transition-all shadow-glow hover:shadow-lg flex items-center justify-center gap-2 group/btn font-display",children:[e.jsx("span",{children:"Acessar Análise Completa"}),e.jsx("span",{className:"material-icons-round text-sm group-hover/btn:translate-x-1 transition-transform",children:"arrow_forward"})]})]})]})}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-slate-200 dark:border-slate-800",children:[e.jsx("button",{onClick:f,className:"px-5 py-2.5 rounded-full border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 text-[11px] font-bold uppercase tracking-widest hover:bg-slate-50 dark:hover:bg-slate-800 transition shadow-sm",children:"Abrir Suporte"}),e.jsx("button",{className:"px-5 py-2.5 rounded-full border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 text-[11px] font-bold uppercase tracking-widest hover:bg-slate-50 dark:hover:bg-slate-800 transition shadow-sm",children:"Falar com Advisor"})]}),e.jsx(xe,{open:d,onClose:()=>m(!1)}),e.jsx(me,{open:n,onClose:()=>i(!1),baseline:R||{},onConfirm:l=>D()}),e.jsx(pe,{open:b,onClose:()=>p(!1)})]})}const ue=({title:s,badge:t,desc:o,type:d,actions:m})=>{const n={success:"text-success bg-success/10",warning:"text-warning bg-warning/10",danger:"text-error bg-error/10"};return e.jsxs("div",{className:"bg-white dark:bg-slate-800/40 p-4 rounded-xl border border-slate-100 dark:border-white/5 hover:border-primary/40 transition-colors shadow-sm group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-200 font-display",children:s}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded-lg border border-current/10 font-display ${n[d]}`,children:t})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:o}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 bg-slate-200/50 dark:bg-slate-700/50 text-slate-700 dark:text-slate-300 text-[10px] py-1.5 rounded font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition uppercase tracking-widest leading-none font-display",children:m[0]}),e.jsx("button",{className:"flex-1 bg-primary/10 text-primary hover:bg-primary hover:text-white text-[10px] py-1.5 rounded font-bold transition border border-primary/20 uppercase tracking-widest leading-none font-display",children:m[1]})]})]})},B=({label:s,color:t="slate",dot:o=!1})=>{const d={slate:"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400",success:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800 text-emerald-600 dark:text-emerald-400",blue:"bg-blue-50 dark:bg-blue-900/20 border-blue-100 dark:border-blue-800 text-blue-600 dark:text-blue-400"};return e.jsxs("div",{className:`px-3 py-1 rounded-full border text-[11px] font-bold flex items-center gap-2 shadow-sm ${d[t]}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${t==="slate"?"bg-slate-400":t==="success"?"bg-emerald-500":"bg-blue-500"} ${o?"animate-pulse":""}`}),s]})};export{Ce as default};
