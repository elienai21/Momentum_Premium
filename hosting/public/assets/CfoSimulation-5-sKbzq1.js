import{j as e,a as b}from"./charts--kFkiaCp.js";import{G as f,d as N}from"./index-CETmOTzF.js";import{u as y}from"./usePulseSummary-DZgNtT5q.js";import{ah as k,Y as w,y as S,W as R}from"./icons-Bc7DOyy3.js";import{S as h}from"./StatsCard-B55lZtJ5.js";import{S as P}from"./SectionHeader-DkKv0CWh.js";import"./vendor-DnLjH3oN.js";import"./query-BGhlxTj0.js";import"./firebase-dP-Dck55.js";const D=({occupancy:i,setOccupancy:r,price:d,setPrice:c,expenses:x,setExpenses:p,onReset:u})=>{const a=(n,s,t,l)=>e.jsxs("div",{className:"mb-6 last:mb-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:n}),e.jsxs("span",{className:`text-sm font-bold ${s>0?"text-emerald-500":s<0?"text-rose-500":"text-slate-400"}`,children:[s>0?"+":"",s,"%"]})]}),e.jsx("input",{type:"range",min:"-50",max:"50",value:s,onChange:m=>t(Number(m.target.value)),className:`w-full h-2 rounded-lg appearance-none cursor-pointer bg-slate-200 dark:bg-slate-700 accent-${l}-500 hover:accent-${l}-400 transition-all`}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-1 font-mono",children:[e.jsx("span",{children:"-50%"}),e.jsx("span",{children:"0%"}),e.jsx("span",{children:"+50%"})]})]});return e.jsxs(f,{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined",children:"tune"}),"Parâmetros"]}),e.jsxs("button",{onClick:u,className:"text-xs text-slate-500 hover:text-primary flex items-center gap-1 transition-colors",title:"Resetar todos os parâmetros",children:[e.jsx(k,{size:14}),"Resetar"]})]}),e.jsxs("div",{className:"flex-1",children:[a("Variação de Ocupação",i,r,"indigo"),a("Variação de Preço Médio",d,c,"emerald"),a("Variação de Despesas",x,p,"rose")]}),e.jsx("div",{className:"mt-6 p-3 bg-blue-50/50 dark:bg-blue-900/10 rounded-lg border border-blue-100 dark:border-blue-800",children:e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300 flex items-start gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"info"}),"Simule cenários ajustando os sliders acima. O resultado é calculado instantaneamente."]})})]})},$=({baseRevenue:i,baseExpenses:r,varOccupancy:d,varPrice:c,varExpenses:x})=>{const p=1+d/100+c/100,u=1+x/100,a=i*p,n=r*u,s=i-r,t=a-n,l=t-s,m=t<0,o=j=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(j);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(h,{label:"Receita Projetada",value:o(a),trend:a>i?{value:"vs atual",direction:"up"}:a<i?{value:"vs atual",direction:"down"}:void 0,icon:w,variant:"success"}),e.jsx(h,{label:"Despesa Projetada",value:o(n),trend:n>r?{value:"vs atual",direction:"up"}:n<r?{value:"vs atual",direction:"down"}:void 0,icon:S,variant:"danger"}),e.jsx(h,{label:"Lucro Operacional",value:o(t),trend:t>s?{value:"vs atual",direction:"up"}:t<s?{value:"vs atual",direction:"down"}:void 0,icon:R,variant:t>=0?"success":"danger",className:m?"border-rose-500 ring-1 ring-rose-500/50":""})]}),m&&e.jsxs("div",{className:"p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg flex items-center gap-3 animate-pulse",children:[e.jsx("span",{className:"material-symbols-outlined text-rose-600 dark:text-rose-400",children:"warning"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-rose-700 dark:text-rose-300 text-sm",children:"Risco de Prejuízo Operacional"}),e.jsx("p",{className:"text-xs text-rose-600 dark:text-rose-400",children:"Os parâmetros atuais indicam uma operação deficitária."})]})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-4",children:"Análise de Sensibilidade"}),e.jsxs("div",{className:"flex items-center justify-between text-sm py-2 border-b border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Lucro Atual (Base)"}),e.jsx("span",{className:"font-mono text-slate-500",children:o(s)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm py-2 border-b border-slate-100 dark:border-slate-800",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Impacto da Simulação"}),e.jsxs("span",{className:`font-mono font-bold ${l>=0?"text-emerald-500":"text-rose-500"}`,children:[l>0?"+":"",o(l)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-lg py-3 font-bold",children:[e.jsx("span",{className:"text-slate-800 dark:text-white",children:"Resultado Final"}),e.jsx("span",{className:t>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400",children:o(t)})]})]})]})},V=()=>{const{tenantId:i}=N(),r=new Date,d=r.getFullYear(),c=r.getMonth()+1,x=`${d}-${String(c).padStart(2,"0")}-01`,p=new Date(d,c,0).getDate(),u=`${d}-${String(c).padStart(2,"0")}-${p}`,{data:a}=y({tenantId:i||"",periodStart:x,periodEnd:u}),[n,s]=b.useState(0),[t,l]=b.useState(0),[m,o]=b.useState(0),j=()=>{s(0),l(0),o(0)},g=a?.kpis?.revenueMonth||1e4,v=a?.kpis?.expenseMonth||5e3;return e.jsxs("div",{className:"p-6 md:p-8 max-w-7xl mx-auto space-y-8 animate-in fade-in duration-500",children:[e.jsx(P,{title:"Simulador de Cenários & Stress Test",subtitle:"Ferramenta de análise preditiva para projeção de resultados baseada em variações de mercado."}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsx(D,{occupancy:n,setOccupancy:s,price:t,setPrice:l,expenses:m,setExpenses:o,onReset:j})}),e.jsxs("div",{className:"lg:col-span-8",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800/50 p-2 px-4 rounded-full w-fit",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"calendar_today"}),e.jsxs("span",{children:["Dados base do mês atual (",c.toString().padStart(2,"0"),"/",d,")"]})]}),e.jsx($,{baseRevenue:g,baseExpenses:v,varOccupancy:n,varPrice:t,varExpenses:m})]})]})]})};export{V as default};
